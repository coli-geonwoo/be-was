<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="../reset.css" rel="stylesheet"/>
    <link href="../global.css" rel="stylesheet"/>
    <link href="../main.css" rel="stylesheet"/>
</head>
<body>
<div class="container">
    <header class="header">
        <a href="/main"><img src="../img/signiture.svg"/></a>
        <ul class="header__menu">
            <li class="header__menu__item header__greeting">
                <img
                        class="header__profile-img"
                        src="{{profileImage}}"
                        alt="프로필 이미지"
                />
                <span>안녕하세요, {{account}}님!</span>
            </li>
            <li class="header__menu__item">
                <a class="btn btn_contained btn_size_s" href="/article">글쓰기</a>
            </li>
            <li class="header__menu__item">
                <button id="logout-btn" class="btn btn_ghost btn_size_s">
                    로그아웃
                </button>
            </li>
        </ul>
    </header>
    <div class="wrapper" id="wrapper">
        <div class="post">
            <div class="post__account">
                <img class="post__account__img" />
                <p class="post__account__nickname">account</p>
            </div>
            <div class="post__image-wrapper">
                <button class="post__image-nav left" id="prev-image">‹</button>
                <img class="post__img" id="post-image" />
                <button class="post__image-nav right" id="next-image">›</button>
            </div>
            <div class="post__menu">
                <ul class="post__menu__personal">
                    <li>
                        <button class="post__menu__btn" id = "like-btn">
                            <img src="./img/like.svg" />
                            <span id="like-count">0</span>
                        </button>
                    </li>
                    <li>
                        <button class="post__menu__btn">
                            <img src="./img/comment.svg" />
                            <span id="comment-count">0</span>
                        </button>
                    </li>
                </ul>
                <button class="post__menu__btn">
                    <img src="./img/bookMark.svg" />
                </button>
            </div>
            <h2 id="post-title"></h2>
            <p class="post__article" id="post-content">
            </p>
        </div>
        <ul class="comment" id="comment-list">
            <li id="comment-items"></li>
            <li>
                <button id="show-all-btn" class="btn btn_ghost btn_size_m">
                    모든 댓글 보기(3개)
                </button>
            </li>
        </ul>
        <nav class="nav">
            <ul class="nav__menu">
                <li class="nav__menu__item">
                    <button id="prev-article" class="nav__menu__item__btn">
                        <img class="nav__menu__item__img" src="./img/ci_chevron-left.svg" />
                        이전 글
                    </button>
                </li>
                <li class="nav__menu__item">
                    <a id="write-comment-btn" class="btn btn_ghost btn_size_m">댓글 작성</a>
                </li>
                <li class="nav__menu__item">
                    <button id="next-article" class="nav__menu__item__btn">
                        다음 글
                        <img class="nav__menu__item__img" src="./img/ci_chevron-right.svg" />
                    </button>

                </li>
            </ul>
        </nav>
    </div>
    <div class="empty" id="empty-state" style="display:none;">
        <p class="empty__text">
            포스팅이 존재하지 않습니다!<br />
            새로운 글을 작성해볼까요?
        </p>
        <a href="/article" class="btn btn_contained btn_size_m">
            글 작성하기
        </a>
    </div>
</div>
<script>
    const logoutBtn = document.getElementById("logout-btn");
    logoutBtn.addEventListener("click", async () => {
        try {
            const response = await fetch("/logout", {
                method: "POST",
            });

            if (!response.ok) {
                alert("로그아웃에 실패했습니다.");
                return;
            }
            window.location.href = "/";
        } catch (e) {
            alert("서버와 통신할 수 없습니다.");
        }
    });

    //mypage로 이동
    const postAccount = document.querySelector(".header__menu__item.header__greeting");
    postAccount.addEventListener("click", () => {
        window.location.href = "/mypage";
    });
</script>
<script src="./main.js"></script>
</body>
</html>
